<div class="container mt-3" *ngIf="data">
    <div class="row">
        <div class="col  text-end">
            <span (click)="onClose()" style="cursor: pointer;"><i class="fa fa-times" aria-hidden="true"></i>
                Close</span>
        </div>
    </div>
    <div class="row  mb-2">
        <div class="col-md-6">
            <div class="card mt-2">
                <div class="card-header"> Info {{data?.status}} </div>
                <div class="card-body" *ngIf="!data.user; else noUser1">
                    <div *ngIf="data._id"><strong>Cart:</strong> {{data._id}}</div>
                    <div *ngIf="data.browser_ip"> <strong>IP:</strong> {{data?.browser_ip}}</div>

                    <strong>Created:</strong> {{data?.created_at | date:'medium'}}
                    <div class="mt-3"> {{data?.cart?.first_name}} {{data?.cart?.last_name}} </div>
                    <div class="mt-3">
                        {{data?.cart?.address1}} {{data?.cart?.address2}}<br>
                        {{data?.cart?.city}} {{data?.cart?.province}} {{data?.cart?.zip}}<br>
                        {{data?.cart?.country}}
                    </div>
                    <div class="mt-3">
                        {{data?.cart?.phone}}<br>
                        {{data?.cart?.email}}
                    </div>
                    <div class="mt-3">
                        {{data?.cart?.payment_details?.cc_name_on_card}}<br>
                        <span
                            *ngIf="data && data.cart && data.cart.payment_details && data.cart.payment_details.cc_number">************{{data?.cart?.payment_details?.cc_number
                            | slice:-4}}</span>
                        <br> {{data?.cart?.payment_details?.cc_exp_date}}
                    </div>

                </div>
                <ng-template #noUser1>
                    <div class="card-body">
                        <div *ngIf="data._id"><strong>Cart:</strong> {{data._id}}</div>
                        <div *ngIf="data.browser_ip"> <strong>IP:</strong> {{data?.browser_ip}}</div>

                        <strong>Created:</strong> {{data?.created_at | date:'medium'}}
                        <div class="mt-3"> {{data?.user?.first_name}} {{data?.user?.middle_name}}
                            {{data?.user?.last_name}} </div>
                        <div class="mt-3">
                            {{data?.user?.address1}} {{data?.user?.address2}}<br>
                            {{data?.user?.city}} {{data?.user?.province}} {{data?.user?.zip}}<br>
                            {{data?.user?.country}}

                        </div>
                        <div class="mt-3">
                            {{data?.user?.phone_number}}<br>
                            {{data?.user?.email}}
                        </div>

                    </div>
                </ng-template>

            </div>
        </div>
        <div class="col-md-6" *ngIf="data.cart && data.cart.shipping_address">
            <div class="card mt-2">
                <div class="card-header"> Shipping Address </div>
                <div class="card-body"> {{data?.cart?.shipping_address?.address1}}
                    {{data?.cart?.shipping_address?.address2}}<br>
                    {{data?.cart?.shipping_address?.city}} {{data?.cart?.shipping_address?.province}}
                    {{data?.cart?.shipping_address?.zip}}<br> {{data?.cart?.shipping_address?.country}} </div>
            </div>
        </div>
        <div class="col-md-6" *ngIf="data.cart && data.cart.user_type === 'practitioner'">
            <div class="card mt-2">
                <div class="card-header"> Order Information </div>
                <div class="card-body">
                    <ul class="list-group" *ngIf="data.cart">
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            *ngIf="data.cart.user_type">
                            <span>User Type: </span>
                            <span class="text-capitalize">{{data?.cart?.user_type}} </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            *ngIf="data.cart.prac_pay">
                            <span>Payment Type: </span>
                            <span class="text-capitalize">{{data?.cart?.prac_pay}} </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            *ngIf="data.cart.customer_id">
                            <span>Practitioner Number: </span>
                            <span>{{data?.customer_id}}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            *ngIf="data.cart.practitioner_name">
                            <span>Practitioner: </span>
                            <span class="text-capitalize">{{data?.practitioner_name}} </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            *ngIf="data.cart.prac_first_name">
                            <span>Practitioner First Name: </span>
                            <span class="text-capitalize">{{data?.prac_first_name}} </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            *ngIf="data.cart.prac_last_name">
                            <span>Practitioner Last Name: </span>
                            <span class="text-capitalize">{{data?.prac_last_name}} </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            *ngIf="data.cart.npi">
                            <span>NPI: </span>
                            <span>{{data?.cart?.npi}} </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            *ngIf="data.cart.prac_email">
                            <span>Practitioner Email: </span>
                            <span>{{data?.prac_email}} </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center"
                            *ngIf="data.cart.prac_phone">
                            <span>Practitioner Phone: </span>
                            <span>{{data?.prac_phone}} </span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6" *ngIf="data.user">
            <div class="card mt-2">
                <div class="card-header">
                    Personal
                </div>
                <div class="card-body">
                    <div *ngIf="data.user.ssn"><strong>SSN: </strong> {{data?.user?.ssn}}</div>
                    <div *ngIf="data.user.passport_number"><strong>Passport Number: </strong>
                        {{data?.user?.passport_number}}</div>
                    <div *ngIf="data.user.nationality"><strong>Nationality: </strong>
                        {{data?.user?.nationality}}</div>
                    <div *ngIf="data.user.dob"><strong>Date of Birth: </strong>{{data?.user?.dob}}</div>
                    <div *ngIf="data.user.gender"><strong>Gender: </strong>{{data?.user?.gender}}</div>
                    <div *ngIf="data.user.vaccinated"><strong>Vaccinated: </strong>{{data?.user?.vaccinated}}
                    </div>
                    <div
                        *ngIf="data.user.license && data.user.license.imageURL && data.user.license.imageURL.length && (data.user.license.imageURL.length > 0)">
                        <div *ngFor="let k of data.user.license.imageURL">
                            <img src="{{k.url}}" alt="" class="img-thumbnail" style="max-height: 250px;">
                        </div>
                    </div>

                </div>
            </div>

        </div>
        <div class="col-md-6" *ngIf="data.user && data.user.has_insurance">
            <div class="card mt-2">
                <div class="card-header">
                    Insurance
                </div>
                <div class="card-body">
                    <div *ngIf="data.user.insurance_name"><strong>Name: </strong> {{data?.user?.insurance_name}}
                    </div>
                    <div *ngIf="data.user.insurance_policy_number"><strong>Policy Number: </strong>
                        {{data?.user?.insurance_policy_number}}</div>
                    <div *ngIf="data.user.insurance_group_number"><strong>Group Number: </strong>
                        {{data?.user?.insurance_group_number}}</div>
                    <div *ngIf="data.user.insurance_suffix_number"><strong>Suffix Number: </strong>
                        {{data?.user?.insurance_suffix_number}}</div>
                    <div
                        *ngIf="data.user.insurance_card && data.user.insurance_card.imageURL && data.user.insurance_card.imageURL.length && (data.user.insurance_card.imageURL.length > 0)">
                        <div *ngFor="let j of data.user.insurance_card.imageURL">

                            <img src="{{j.url}}" alt="" class="img-thumbnail" style="max-height: 250px;">
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>
    <div class="row mt-3" *ngIf="data.cart.line_items">
        <div class="col-md">
            <div> <strong>Cart Items</strong> </div>
            <ul class="list-group" *ngFor="let item of data.cart.line_items">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span class="badge bg-primary rounded-pill">{{item?.quantity}}</span>
                    <span
                        *ngIf="(item.product && item.product.files && item.product.files.length && item.product.files[0] && item.product.files[0].url); else noImage"><img
                            src="{{item?.product?.files[0]?.url}}" alt="{{item?.product?.title}}" class="img-fluid"
                            style="max-height: 64px;"> {{item?.product?.title}}
                        <span *ngIf="item.product && item.product.subTypeSelectedText">
                            {{item.product.subTypeSelectedText}}</span>
                        <span *ngIf="item.product && item.product.subCategorySelectedText">
                            {{item.product.subCategorySelectedText}}</span>
                    </span>
                    <ng-template #noImage>
                        <span>{{item?.product?.title}}
                            <span *ngIf="item.product && item.product.subTypeSelectedText">
                                {{item.product.subTypeSelectedText}}</span>
                            <span *ngIf="item.product && item.product.subCategorySelectedText">
                                {{item.product.subCategorySelectedText}}</span>
                        </span>
                    </ng-template>
                </li>
            </ul>
            <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span>Total</span>
                    <div class="mt-3">
                        <strong>{{data.cart?.amount | currency}}</strong>
                        <span *ngIf="data.cart && data.cart.tax"><br>Tax: {{data?.cart?.tax |
                            currency}}</span>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>